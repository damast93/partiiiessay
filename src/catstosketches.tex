\section{From categories to sketches}
\label{seq:catstoskeches}

In this section, we will see how to embed accessible categories into functor categories and turn them into models of a sketch: \\

\subsection{Canonical colimits}

Let $\cat K$ be a $\lambda$-accessible category. We know that every object is $\lambda$-filtered colimit of some set $\cat A$ of $\lambda$-presentable objects. In fact, we can pick a canonical such set generating set by considering all $\lambda$-presentable objects.

\begin{Proposition}
For every $\lambda$-accessible category $\cat K$, the full subcategory of $\lambda$-presentable objects is essentially small. 
\end{Proposition}
\begin{Proof}
Take any $\lambda$-presentable object $B$ and write it as a $\lambda$-filtered colimit $B \xrightarrow{\sim} \colim_i A_i$ of objects in $\cat A$. The isomorphism factors through one of the $A_i$, exhibiting $B$ as a retract $B \xrightarrow{j} A_i \xrightarrow{r} B$ of $A_i$. Note that $jr$ is an idempotent endomorphism of $A_i$, and retracts that induce the same endomorphism are isomorphic. Thus we have an class injection
\[ \{ \text{retracts of } A_i \}/\text{isomorphism} \hookrightarrow \hom(A_i,A_i) \]
where the codomain is a set as $\cat K$ is locally small. Now take the union of the sets of representatives for each $A_i \in \cat A$.
\end{Proof}

Let's write $\cat K_\lambda$ for any set of representatives of the $\lambda$-presentable objects up to isomorphism. Given an object $K$ and small full subcategory $\cat A$ of $\cat K$, the canonical diagram with respect to $\cat A$ is the diagram of all morphisms of $\cat A$-objects into $\cat K$, formally given by the forgetful functor
\[ U : (\cat A/K) \to \cat K. \]
We say that $K$ is the canonical colimit of $\cat A$-objects if the canonical cocone
\[ (A \xrightarrow{f} K) \xrightarrow{f} K \]
is colimiting. We call $\cat A$ \emph{dense} in $\cat K$ if every object of $\cat K$ is the canonical colimit of $\cat A$-objects.

\begin{Proposition}\label{prop:presdense}
For every $\lambda$-accessible category $\cat K$ and $\cat A = K_\lambda$, every object is canonical colimit of $\cat A$-objects and the canonical diagram is $\lambda$-filtered.
\end{Proposition}
\begin{Proof}
\end{Proof}

Given a small full subcategory $\cat A$ of $\cat K$, we have a functor 
\[ E : \cat K \to \fun{\cat A^\op}{\catname{Set}} \]
that sends an object $K$ to the domain restriction of $\hom(-, K)$ to $\cat A^\op$. We can restate the properties of $\cat A$ in terms of $E$ in the following way:
\begin{enumerate}
\item $E$ is fully faithful iff $\cat A$ is dense in $\cat K$.
\item $E$ preserves $\lambda$-filtered colimits iff all objects of $\cat A$ are $\lambda$-presentable.
\end{enumerate}

Together with Proposition \ref{prop:presdense}, we see that for $\lambda$-accessible categories $\cat K$, we get a canonical embedding
\[ E : \cat K \to \fun{\cat A}{\catname{Set}} \text{ where } \cat A = \cat K^\op_\lambda. \]

\subsection{Flat functors}
We want to characterise precisely which subcategories of $\fun{\cat A}{\catname{Set}}$ occur via embeddings of accessible categories.

\begin{Definition}\
We call a functor $F : \cat A \to \catname{Set}$
\begin{enumerate}
\item \emph{$\lambda$-flat} if it is $\lambda$-filtered colimit of representable functors
\item \emph{$\lambda$-continuous} if it preserves $\lambda$-small limits
\end{enumerate}
and we denote the full subcategories of $\fun {\cat A}{\catname{Set}}$ of $\lambda$-flat and $\lambda$-continuous functors as 
\[ \flat_\lambda(\cat A), \cont_\lambda(\cat A) \text{ respectively}. \]
\end{Definition}

\begin{Proposition}
Let $\cat K$ be $\lambda$-accessible and $\cat A = \cat K^\op_\lambda$. Then the essential image of the canonical embedding consists precisely of the $\lambda$-flat functors, and we have an equivalence
\[ \cat K \simeq \flat_\lambda(\cat A). \]
Conversely, for $\cat A$ small, the category $\flat_\lambda(\cat A)$ is $\lambda$-accessible.
\end{Proposition}
\begin{Proof}
\end{Proof}

Note that this description leads to a strong characterisation in the locally presentable case.
\begin{Proposition}
Let $\cat K$ be $\lambda$-accessible \emph{and cocomplete}, i.e. locally $\lambda$-presentable, and $\cat A = \cat K^\op_\lambda$. Then the essential image of the canonical embedding restricts to the $\lambda$-continuous functors and
\[ \cat K \simeq \cont_\lambda(\cat A). \]
\end{Proposition}
\begin{Proof}
\end{Proof}

\begin{Corollary}\
Let $\cat K$ be a locally $\lambda$-presentable category. Then
\begin{enumerate}
\item $\cat K$ is complete, and well-powered \label{item:cw}
\item $\cat K$ is sketchable by a $\lambda$-small limit sketch \label{item:limsketch}
\end{enumerate}
\end{Corollary}
\begin{Proof}
We have an equivalence $K \simeq \cont_\lambda(\cat A)$. The latter category is closed under limits in $\fun{\cat A}{\catname{Set}}$, as limits commute with limits; thus it is complete. Every category with pullbacks and a strong generator is well-powered, showing \ref{item:cw}. For \ref{item:limsketch}, note that by definition
\[ \cont_\lambda(\cat A) \simeq \mod(\mathbb S) \]
where the sketch $\mathbb S$ collects all $\lambda$-small limit cones in $\cat A$.
\end{Proof}